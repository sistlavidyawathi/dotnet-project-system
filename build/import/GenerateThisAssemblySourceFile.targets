<!-- Licensed to the .NET Foundation under one or more agreements. The .NET Foundation licenses this file to you under the MIT license. See the LICENSE.md file in the project root for more information. -->

<Project>
  <!-- Responsible for generating ThisAssembly class containing strong name information. -->

  <Target Name="GenerateThisAssembly" BeforeTargets="CoreCompile" Condition="'$(Language)' == 'C#'">

    <PropertyGroup>
      <ThisAssemblySourceFile>$(IntermediateOutputPath)\$(AssemblyName).ThisAssembly$(DefaultLanguageSourceExtension)</ThisAssemblySourceFile>
      <ThisAssemblyContents>
        <![CDATA[
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
// </auto-generated>
//------------------------------------------------------------------------------

[System.CodeDom.Compiler.GeneratedCode("GenerateThisAssembly","1.0.0.0")]
internal static partial class ThisAssembly {
    internal const string AssemblyVersion = "$(AssemblyVersion)"%3B
    internal const string AssemblyName = "$(AssemblyName)"%3B
    internal const string PublicKey = "$(PublicKey)"%3B
    internal const string PublicKeyToken = "$(PublicKeyToken)"%3B
    internal const string FullName = AssemblyName + ", Version=" + AssemblyVersion + ", Culture=neutral, PublicKeyToken=" + PublicKeyToken%3B
}
 ]]>
      </ThisAssemblyContents>
    </PropertyGroup>

    <MakeDir Directories="$(IntermediatePath)"/>

    <WriteLinesToFile
      File="$(ThisAssemblySourceFile)"
      Lines="$(ThisAssemblyContents)"
      Overwrite="true"
      WriteOnlyWhenDifferent="true" />

    <ItemGroup>
      <FileWrites Include="$(ThisAssemblySourceFile)" />
      <Compile Include="$(ThisAssemblySourceFile)" />
    </ItemGroup>
  </Target>
    
</Project>
